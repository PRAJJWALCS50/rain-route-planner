{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prajj\\\\OneDrive\\\\Desktop\\\\rain\\\\client\\\\src\\\\RadarMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useMemo } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RAINVIEWER_API = 'https://api.rainviewer.com/public/weather-maps.json';\nconst RAIN_TPL = timestamp => `https://tilecache.rainviewer.com/v2/radar/${timestamp}/256/{z}/{x}/{y}/2/1_1.png`;\n_c = RAIN_TPL;\nfunction normalizeRouteCoordinates(input) {\n  if (!Array.isArray(input)) return [];\n  return input.map(pair => {\n    if (Array.isArray(pair) && pair.length >= 2 && typeof pair[0] === 'number' && typeof pair[1] === 'number') {\n      // Expecting [lng, lat] as per example, convert to [lat, lng]\n      return [pair[1], pair[0]];\n    }\n    if (pair && typeof pair === 'object' && 'lat' in pair && 'lng' in pair) {\n      return [pair.lat, pair.lng];\n    }\n    return null;\n  }).filter(Boolean);\n}\nconst ControlButton = ({\n  onClick,\n  title,\n  children,\n  disabled\n}) => /*#__PURE__*/_jsxDEV(\"button\", {\n  onClick: onClick,\n  title: title,\n  disabled: disabled,\n  className: `px-3 py-1 rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors`,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 26,\n  columnNumber: 2\n}, this);\n_c2 = ControlButton;\nconst RadarMap = ({\n  routeCoords = []\n}) => {\n  _s();\n  const mapContainerRef = useRef(null);\n  const mapRef = useRef(null);\n  const baseLayerRef = useRef(null);\n  const radarLayerRef = useRef(null);\n  const routeLayerRef = useRef(null);\n  const [frames, setFrames] = useState([]); // array of timestamps (seconds)\n  const [frameIndex, setFrameIndex] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const playTimerRef = useRef(null);\n  const normalizedLatLngs = useMemo(() => normalizeRouteCoordinates(routeCoords), [routeCoords]);\n\n  // Initialize map once\n  useEffect(() => {\n    if (mapRef.current) return;\n    const map = L.map(mapContainerRef.current, {\n      center: [20.5937, 78.9629],\n      // India\n      zoom: 5,\n      preferCanvas: true\n    });\n    mapRef.current = map;\n    baseLayerRef.current = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 19,\n      attribution: '&copy; OpenStreetMap contributors'\n    }).addTo(map);\n  }, []);\n\n  // Fetch RainViewer frames\n  useEffect(() => {\n    let isCancelled = false;\n    async function fetchFrames() {\n      try {\n        const res = await fetch(RAINVIEWER_API);\n        const data = await res.json();\n        const past = data && data.radar && Array.isArray(data.radar.past) ? data.radar.past : [];\n        const lastHourFrames = past.slice(-6); // roughly last hour (5-10 min steps)\n        const timestamps = lastHourFrames.map(f => f.time);\n        if (!isCancelled && timestamps.length > 0) {\n          setFrames(timestamps);\n          setFrameIndex(timestamps.length - 1); // most recent\n        }\n      } catch (e) {\n        console.error('Failed to load RainViewer frames', e);\n      }\n    }\n    fetchFrames();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  // Create/update radar layer when frames or frameIndex change\n  useEffect(() => {\n    if (!mapRef.current || frames.length === 0) return;\n    const timestamp = frames[frameIndex];\n    if (!radarLayerRef.current) {\n      radarLayerRef.current = L.tileLayer(RAIN_TPL(timestamp), {\n        opacity: 0.6,\n        zIndex: 400,\n        tileSize: 256,\n        crossOrigin: true\n      }).addTo(mapRef.current);\n    } else {\n      radarLayerRef.current.setUrl(RAIN_TPL(timestamp));\n    }\n  }, [frames, frameIndex]);\n\n  // Draw or update route polyline\n  useEffect(() => {\n    if (!mapRef.current) return;\n    if (routeLayerRef.current) {\n      routeLayerRef.current.remove();\n      routeLayerRef.current = null;\n    }\n    if (normalizedLatLngs.length > 0) {\n      routeLayerRef.current = L.polyline(normalizedLatLngs, {\n        color: '#4f46e5',\n        weight: 5,\n        opacity: 0.9\n      }).addTo(mapRef.current);\n      mapRef.current.fitBounds(routeLayerRef.current.getBounds(), {\n        padding: [24, 24]\n      });\n    }\n  }, [normalizedLatLngs]);\n\n  // Handle playback\n  useEffect(() => {\n    if (!isPlaying) {\n      if (playTimerRef.current) {\n        clearInterval(playTimerRef.current);\n        playTimerRef.current = null;\n      }\n      return;\n    }\n    if (playTimerRef.current) return;\n    playTimerRef.current = setInterval(() => {\n      setFrameIndex(prev => {\n        if (frames.length === 0) return prev;\n        return (prev + 1) % frames.length;\n      });\n    }, 700);\n    return () => {\n      if (playTimerRef.current) {\n        clearInterval(playTimerRef.current);\n        playTimerRef.current = null;\n      }\n    };\n  }, [isPlaying, frames.length]);\n  const canStep = frames.length > 1;\n  const onPrev = () => setFrameIndex(i => (i - 1 + frames.length) % frames.length);\n  const onNext = () => setFrameIndex(i => (i + 1) % frames.length);\n  const onTogglePlay = () => setIsPlaying(p => !p);\n  const currentTimeLabel = useMemo(() => {\n    if (frames.length === 0) return 'Loading...';\n    const tsMs = frames[frameIndex] * 1000;\n    const dt = new Date(tsMs);\n    return dt.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  }, [frames, frameIndex]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full h-[520px] rounded-xl overflow-hidden shadow-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: mapContainerRef,\n        className: \"absolute inset-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-3 top-3 bg-white/90 backdrop-blur rounded-lg shadow p-2 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: onPrev,\n          title: \"Previous frame\",\n          disabled: !canStep,\n          children: \"\\u27E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: onTogglePlay,\n          title: isPlaying ? 'Pause' : 'Play',\n          disabled: frames.length === 0,\n          children: isPlaying ? 'Pause' : 'Play'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n          onClick: onNext,\n          title: \"Next frame\",\n          disabled: !canStep,\n          children: \"\\u27E9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-2 text-sm text-gray-700\",\n          children: currentTimeLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 3\n  }, this);\n};\n_s(RadarMap, \"ms4xbsjz+dlyGd4g3ivhtGxu5QM=\");\n_c3 = RadarMap;\nexport default RadarMap;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"RAIN_TPL\");\n$RefreshReg$(_c2, \"ControlButton\");\n$RefreshReg$(_c3, \"RadarMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useMemo","L","jsxDEV","_jsxDEV","RAINVIEWER_API","RAIN_TPL","timestamp","_c","normalizeRouteCoordinates","input","Array","isArray","map","pair","length","lat","lng","filter","Boolean","ControlButton","onClick","title","children","disabled","className","fileName","_jsxFileName","lineNumber","columnNumber","_c2","RadarMap","routeCoords","_s","mapContainerRef","mapRef","baseLayerRef","radarLayerRef","routeLayerRef","frames","setFrames","frameIndex","setFrameIndex","isPlaying","setIsPlaying","playTimerRef","normalizedLatLngs","current","center","zoom","preferCanvas","tileLayer","maxZoom","attribution","addTo","isCancelled","fetchFrames","res","fetch","data","json","past","radar","lastHourFrames","slice","timestamps","f","time","e","console","error","opacity","zIndex","tileSize","crossOrigin","setUrl","remove","polyline","color","weight","fitBounds","getBounds","padding","clearInterval","setInterval","prev","canStep","onPrev","i","onNext","onTogglePlay","p","currentTimeLabel","tsMs","dt","Date","toLocaleTimeString","hour","minute","ref","_c3","$RefreshReg$"],"sources":["C:/Users/prajj/OneDrive/Desktop/rain/client/src/RadarMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nconst RAINVIEWER_API = 'https://api.rainviewer.com/public/weather-maps.json';\r\nconst RAIN_TPL = (timestamp) => `https://tilecache.rainviewer.com/v2/radar/${timestamp}/256/{z}/{x}/{y}/2/1_1.png`;\r\n\r\nfunction normalizeRouteCoordinates(input) {\r\n\tif (!Array.isArray(input)) return [];\r\n\treturn input\r\n\t\t.map((pair) => {\r\n\t\t\tif (Array.isArray(pair) && pair.length >= 2 &&\r\n\t\t\t\ttypeof pair[0] === 'number' && typeof pair[1] === 'number') {\r\n\t\t\t\t// Expecting [lng, lat] as per example, convert to [lat, lng]\r\n\t\t\t\treturn [pair[1], pair[0]];\r\n\t\t\t}\r\n\t\t\tif (pair && typeof pair === 'object' && 'lat' in pair && 'lng' in pair) {\r\n\t\t\t\treturn [pair.lat, pair.lng];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t})\r\n\t\t.filter(Boolean);\r\n}\r\n\r\nconst ControlButton = ({ onClick, title, children, disabled }) => (\r\n\t<button\r\n\t\tonClick={onClick}\r\n\t\ttitle={title}\r\n\t\tdisabled={disabled}\r\n\t\tclassName={`px-3 py-1 rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors`}\r\n\t>\r\n\t\t{children}\r\n\t</button>\r\n);\r\n\r\nconst RadarMap = ({ routeCoords = [] }) => {\r\n\tconst mapContainerRef = useRef(null);\r\n\tconst mapRef = useRef(null);\r\n\tconst baseLayerRef = useRef(null);\r\n\tconst radarLayerRef = useRef(null);\r\n\tconst routeLayerRef = useRef(null);\r\n\r\n\tconst [frames, setFrames] = useState([]); // array of timestamps (seconds)\r\n\tconst [frameIndex, setFrameIndex] = useState(0);\r\n\tconst [isPlaying, setIsPlaying] = useState(false);\r\n\tconst playTimerRef = useRef(null);\r\n\r\n\tconst normalizedLatLngs = useMemo(() => normalizeRouteCoordinates(routeCoords), [routeCoords]);\r\n\r\n\t// Initialize map once\r\n\tuseEffect(() => {\r\n\t\tif (mapRef.current) return;\r\n\t\tconst map = L.map(mapContainerRef.current, {\r\n\t\t\tcenter: [20.5937, 78.9629], // India\r\n\t\t\tzoom: 5,\r\n\t\t\tpreferCanvas: true\r\n\t\t});\r\n\t\tmapRef.current = map;\r\n\r\n\t\tbaseLayerRef.current = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n\t\t\tmaxZoom: 19,\r\n\t\t\tattribution: '&copy; OpenStreetMap contributors'\r\n\t\t}).addTo(map);\r\n\t}, []);\r\n\r\n\t// Fetch RainViewer frames\r\n\tuseEffect(() => {\r\n\t\tlet isCancelled = false;\r\n\t\tasync function fetchFrames() {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await fetch(RAINVIEWER_API);\r\n\t\t\t\tconst data = await res.json();\r\n\t\t\t\tconst past = (data && data.radar && Array.isArray(data.radar.past)) ? data.radar.past : [];\r\n\t\t\t\tconst lastHourFrames = past.slice(-6); // roughly last hour (5-10 min steps)\r\n\t\t\t\tconst timestamps = lastHourFrames.map(f => f.time);\r\n\t\t\t\tif (!isCancelled && timestamps.length > 0) {\r\n\t\t\t\t\tsetFrames(timestamps);\r\n\t\t\t\t\tsetFrameIndex(timestamps.length - 1); // most recent\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('Failed to load RainViewer frames', e);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchFrames();\r\n\t\treturn () => { isCancelled = true; };\r\n\t}, []);\r\n\r\n\t// Create/update radar layer when frames or frameIndex change\r\n\tuseEffect(() => {\r\n\t\tif (!mapRef.current || frames.length === 0) return;\r\n\t\tconst timestamp = frames[frameIndex];\r\n\t\tif (!radarLayerRef.current) {\r\n\t\t\tradarLayerRef.current = L.tileLayer(RAIN_TPL(timestamp), {\r\n\t\t\t\topacity: 0.6,\r\n\t\t\t\tzIndex: 400,\r\n\t\t\t\ttileSize: 256,\r\n\t\t\t\tcrossOrigin: true\r\n\t\t\t}).addTo(mapRef.current);\r\n\t\t} else {\r\n\t\t\tradarLayerRef.current.setUrl(RAIN_TPL(timestamp));\r\n\t\t}\r\n\t}, [frames, frameIndex]);\r\n\r\n\t// Draw or update route polyline\r\n\tuseEffect(() => {\r\n\t\tif (!mapRef.current) return;\r\n\t\tif (routeLayerRef.current) {\r\n\t\t\trouteLayerRef.current.remove();\r\n\t\t\trouteLayerRef.current = null;\r\n\t\t}\r\n\t\tif (normalizedLatLngs.length > 0) {\r\n\t\t\trouteLayerRef.current = L.polyline(normalizedLatLngs, {\r\n\t\t\t\tcolor: '#4f46e5',\r\n\t\t\t\tweight: 5,\r\n\t\t\t\topacity: 0.9\r\n\t\t\t}).addTo(mapRef.current);\r\n\t\t\tmapRef.current.fitBounds(routeLayerRef.current.getBounds(), { padding: [24, 24] });\r\n\t\t}\r\n\t}, [normalizedLatLngs]);\r\n\r\n\t// Handle playback\r\n\tuseEffect(() => {\r\n\t\tif (!isPlaying) {\r\n\t\t\tif (playTimerRef.current) {\r\n\t\t\t\tclearInterval(playTimerRef.current);\r\n\t\t\t\tplayTimerRef.current = null;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (playTimerRef.current) return;\r\n\t\tplayTimerRef.current = setInterval(() => {\r\n\t\t\tsetFrameIndex(prev => {\r\n\t\t\t\tif (frames.length === 0) return prev;\r\n\t\t\t\treturn (prev + 1) % frames.length;\r\n\t\t\t});\r\n\t\t}, 700);\r\n\t\treturn () => {\r\n\t\t\tif (playTimerRef.current) {\r\n\t\t\t\tclearInterval(playTimerRef.current);\r\n\t\t\t\tplayTimerRef.current = null;\r\n\t\t\t}\r\n\t\t};\r\n\t}, [isPlaying, frames.length]);\r\n\r\n\tconst canStep = frames.length > 1;\r\n\tconst onPrev = () => setFrameIndex((i) => (i - 1 + frames.length) % frames.length);\r\n\tconst onNext = () => setFrameIndex((i) => (i + 1) % frames.length);\r\n\tconst onTogglePlay = () => setIsPlaying((p) => !p);\r\n\r\n\tconst currentTimeLabel = useMemo(() => {\r\n\t\tif (frames.length === 0) return 'Loading...';\r\n\t\tconst tsMs = frames[frameIndex] * 1000;\r\n\t\tconst dt = new Date(tsMs);\r\n\t\treturn dt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n\t}, [frames, frameIndex]);\r\n\r\n\treturn (\r\n\t\t<div className=\"w-full\">\r\n\t\t\t<div className=\"relative w-full h-[520px] rounded-xl overflow-hidden shadow-xl\">\r\n\t\t\t\t<div ref={mapContainerRef} className=\"absolute inset-0\" />\r\n\t\t\t\t{/* Controls overlay */}\r\n\t\t\t\t<div className=\"absolute left-3 top-3 bg-white/90 backdrop-blur rounded-lg shadow p-2 flex items-center gap-2\">\r\n\t\t\t\t\t<ControlButton onClick={onPrev} title=\"Previous frame\" disabled={!canStep}>⟨</ControlButton>\r\n\t\t\t\t\t<ControlButton onClick={onTogglePlay} title={isPlaying ? 'Pause' : 'Play'} disabled={frames.length === 0}>\r\n\t\t\t\t\t\t{isPlaying ? 'Pause' : 'Play'}\r\n\t\t\t\t\t</ControlButton>\r\n\t\t\t\t\t<ControlButton onClick={onNext} title=\"Next frame\" disabled={!canStep}>⟩</ControlButton>\r\n\t\t\t\t\t<div className=\"ml-2 text-sm text-gray-700\">{currentTimeLabel}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RadarMap;\r\n\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AACnE,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,MAAMC,cAAc,GAAG,qDAAqD;AAC5E,MAAMC,QAAQ,GAAIC,SAAS,IAAK,6CAA6CA,SAAS,4BAA4B;AAACC,EAAA,GAA7GF,QAAQ;AAEd,SAASG,yBAAyBA,CAACC,KAAK,EAAE;EACzC,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,EAAE,OAAO,EAAE;EACpC,OAAOA,KAAK,CACVG,GAAG,CAAEC,IAAI,IAAK;IACd,IAAIH,KAAK,CAACC,OAAO,CAACE,IAAI,CAAC,IAAIA,IAAI,CAACC,MAAM,IAAI,CAAC,IAC1C,OAAOD,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAOA,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;MAC5D;MACA,OAAO,CAACA,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC;IAC1B;IACA,IAAIA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI,KAAK,IAAIA,IAAI,IAAI,KAAK,IAAIA,IAAI,EAAE;MACvE,OAAO,CAACA,IAAI,CAACE,GAAG,EAAEF,IAAI,CAACG,GAAG,CAAC;IAC5B;IACA,OAAO,IAAI;EACZ,CAAC,CAAC,CACDC,MAAM,CAACC,OAAO,CAAC;AAClB;AAEA,MAAMC,aAAa,GAAGA,CAAC;EAAEC,OAAO;EAAEC,KAAK;EAAEC,QAAQ;EAAEC;AAAS,CAAC,kBAC5DpB,OAAA;EACCiB,OAAO,EAAEA,OAAQ;EACjBC,KAAK,EAAEA,KAAM;EACbE,QAAQ,EAAEA,QAAS;EACnBC,SAAS,EAAE,qIAAsI;EAAAF,QAAA,EAEhJA;AAAQ;EAAAG,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACF,CACR;AAACC,GAAA,GATIV,aAAa;AAWnB,MAAMW,QAAQ,GAAGA,CAAC;EAAEC,WAAW,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC1C,MAAMC,eAAe,GAAGnC,MAAM,CAAC,IAAI,CAAC;EACpC,MAAMoC,MAAM,GAAGpC,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMqC,YAAY,GAAGrC,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMsC,aAAa,GAAGtC,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMuC,aAAa,GAAGvC,MAAM,CAAC,IAAI,CAAC;EAElC,MAAM,CAACwC,MAAM,EAAEC,SAAS,CAAC,GAAGxC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC1C,MAAM,CAACyC,UAAU,EAAEC,aAAa,CAAC,GAAG1C,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAAC2C,SAAS,EAAEC,YAAY,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM6C,YAAY,GAAG9C,MAAM,CAAC,IAAI,CAAC;EAEjC,MAAM+C,iBAAiB,GAAG7C,OAAO,CAAC,MAAMQ,yBAAyB,CAACuB,WAAW,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;;EAE9F;EACAlC,SAAS,CAAC,MAAM;IACf,IAAIqC,MAAM,CAACY,OAAO,EAAE;IACpB,MAAMlC,GAAG,GAAGX,CAAC,CAACW,GAAG,CAACqB,eAAe,CAACa,OAAO,EAAE;MAC1CC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC;MAAE;MAC5BC,IAAI,EAAE,CAAC;MACPC,YAAY,EAAE;IACf,CAAC,CAAC;IACFf,MAAM,CAACY,OAAO,GAAGlC,GAAG;IAEpBuB,YAAY,CAACW,OAAO,GAAG7C,CAAC,CAACiD,SAAS,CAAC,oDAAoD,EAAE;MACxFC,OAAO,EAAE,EAAE;MACXC,WAAW,EAAE;IACd,CAAC,CAAC,CAACC,KAAK,CAACzC,GAAG,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAf,SAAS,CAAC,MAAM;IACf,IAAIyD,WAAW,GAAG,KAAK;IACvB,eAAeC,WAAWA,CAAA,EAAG;MAC5B,IAAI;QACH,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAACrD,cAAc,CAAC;QACvC,MAAMsD,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;QAC7B,MAAMC,IAAI,GAAIF,IAAI,IAAIA,IAAI,CAACG,KAAK,IAAInD,KAAK,CAACC,OAAO,CAAC+C,IAAI,CAACG,KAAK,CAACD,IAAI,CAAC,GAAIF,IAAI,CAACG,KAAK,CAACD,IAAI,GAAG,EAAE;QAC1F,MAAME,cAAc,GAAGF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,MAAMC,UAAU,GAAGF,cAAc,CAAClD,GAAG,CAACqD,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;QAClD,IAAI,CAACZ,WAAW,IAAIU,UAAU,CAAClD,MAAM,GAAG,CAAC,EAAE;UAC1CyB,SAAS,CAACyB,UAAU,CAAC;UACrBvB,aAAa,CAACuB,UAAU,CAAClD,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;QACvC;MACD,CAAC,CAAC,OAAOqD,CAAC,EAAE;QACXC,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEF,CAAC,CAAC;MACrD;IACD;IACAZ,WAAW,CAAC,CAAC;IACb,OAAO,MAAM;MAAED,WAAW,GAAG,IAAI;IAAE,CAAC;EACrC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAzD,SAAS,CAAC,MAAM;IACf,IAAI,CAACqC,MAAM,CAACY,OAAO,IAAIR,MAAM,CAACxB,MAAM,KAAK,CAAC,EAAE;IAC5C,MAAMR,SAAS,GAAGgC,MAAM,CAACE,UAAU,CAAC;IACpC,IAAI,CAACJ,aAAa,CAACU,OAAO,EAAE;MAC3BV,aAAa,CAACU,OAAO,GAAG7C,CAAC,CAACiD,SAAS,CAAC7C,QAAQ,CAACC,SAAS,CAAC,EAAE;QACxDgE,OAAO,EAAE,GAAG;QACZC,MAAM,EAAE,GAAG;QACXC,QAAQ,EAAE,GAAG;QACbC,WAAW,EAAE;MACd,CAAC,CAAC,CAACpB,KAAK,CAACnB,MAAM,CAACY,OAAO,CAAC;IACzB,CAAC,MAAM;MACNV,aAAa,CAACU,OAAO,CAAC4B,MAAM,CAACrE,QAAQ,CAACC,SAAS,CAAC,CAAC;IAClD;EACD,CAAC,EAAE,CAACgC,MAAM,EAAEE,UAAU,CAAC,CAAC;;EAExB;EACA3C,SAAS,CAAC,MAAM;IACf,IAAI,CAACqC,MAAM,CAACY,OAAO,EAAE;IACrB,IAAIT,aAAa,CAACS,OAAO,EAAE;MAC1BT,aAAa,CAACS,OAAO,CAAC6B,MAAM,CAAC,CAAC;MAC9BtC,aAAa,CAACS,OAAO,GAAG,IAAI;IAC7B;IACA,IAAID,iBAAiB,CAAC/B,MAAM,GAAG,CAAC,EAAE;MACjCuB,aAAa,CAACS,OAAO,GAAG7C,CAAC,CAAC2E,QAAQ,CAAC/B,iBAAiB,EAAE;QACrDgC,KAAK,EAAE,SAAS;QAChBC,MAAM,EAAE,CAAC;QACTR,OAAO,EAAE;MACV,CAAC,CAAC,CAACjB,KAAK,CAACnB,MAAM,CAACY,OAAO,CAAC;MACxBZ,MAAM,CAACY,OAAO,CAACiC,SAAS,CAAC1C,aAAa,CAACS,OAAO,CAACkC,SAAS,CAAC,CAAC,EAAE;QAAEC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;MAAE,CAAC,CAAC;IACnF;EACD,CAAC,EAAE,CAACpC,iBAAiB,CAAC,CAAC;;EAEvB;EACAhD,SAAS,CAAC,MAAM;IACf,IAAI,CAAC6C,SAAS,EAAE;MACf,IAAIE,YAAY,CAACE,OAAO,EAAE;QACzBoC,aAAa,CAACtC,YAAY,CAACE,OAAO,CAAC;QACnCF,YAAY,CAACE,OAAO,GAAG,IAAI;MAC5B;MACA;IACD;IACA,IAAIF,YAAY,CAACE,OAAO,EAAE;IAC1BF,YAAY,CAACE,OAAO,GAAGqC,WAAW,CAAC,MAAM;MACxC1C,aAAa,CAAC2C,IAAI,IAAI;QACrB,IAAI9C,MAAM,CAACxB,MAAM,KAAK,CAAC,EAAE,OAAOsE,IAAI;QACpC,OAAO,CAACA,IAAI,GAAG,CAAC,IAAI9C,MAAM,CAACxB,MAAM;MAClC,CAAC,CAAC;IACH,CAAC,EAAE,GAAG,CAAC;IACP,OAAO,MAAM;MACZ,IAAI8B,YAAY,CAACE,OAAO,EAAE;QACzBoC,aAAa,CAACtC,YAAY,CAACE,OAAO,CAAC;QACnCF,YAAY,CAACE,OAAO,GAAG,IAAI;MAC5B;IACD,CAAC;EACF,CAAC,EAAE,CAACJ,SAAS,EAAEJ,MAAM,CAACxB,MAAM,CAAC,CAAC;EAE9B,MAAMuE,OAAO,GAAG/C,MAAM,CAACxB,MAAM,GAAG,CAAC;EACjC,MAAMwE,MAAM,GAAGA,CAAA,KAAM7C,aAAa,CAAE8C,CAAC,IAAK,CAACA,CAAC,GAAG,CAAC,GAAGjD,MAAM,CAACxB,MAAM,IAAIwB,MAAM,CAACxB,MAAM,CAAC;EAClF,MAAM0E,MAAM,GAAGA,CAAA,KAAM/C,aAAa,CAAE8C,CAAC,IAAK,CAACA,CAAC,GAAG,CAAC,IAAIjD,MAAM,CAACxB,MAAM,CAAC;EAClE,MAAM2E,YAAY,GAAGA,CAAA,KAAM9C,YAAY,CAAE+C,CAAC,IAAK,CAACA,CAAC,CAAC;EAElD,MAAMC,gBAAgB,GAAG3F,OAAO,CAAC,MAAM;IACtC,IAAIsC,MAAM,CAACxB,MAAM,KAAK,CAAC,EAAE,OAAO,YAAY;IAC5C,MAAM8E,IAAI,GAAGtD,MAAM,CAACE,UAAU,CAAC,GAAG,IAAI;IACtC,MAAMqD,EAAE,GAAG,IAAIC,IAAI,CAACF,IAAI,CAAC;IACzB,OAAOC,EAAE,CAACE,kBAAkB,CAAC,EAAE,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAU,CAAC,CAAC;EACzE,CAAC,EAAE,CAAC3D,MAAM,EAAEE,UAAU,CAAC,CAAC;EAExB,oBACCrC,OAAA;IAAKqB,SAAS,EAAC,QAAQ;IAAAF,QAAA,eACtBnB,OAAA;MAAKqB,SAAS,EAAC,gEAAgE;MAAAF,QAAA,gBAC9EnB,OAAA;QAAK+F,GAAG,EAAEjE,eAAgB;QAACT,SAAS,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAE1DzB,OAAA;QAAKqB,SAAS,EAAC,+FAA+F;QAAAF,QAAA,gBAC7GnB,OAAA,CAACgB,aAAa;UAACC,OAAO,EAAEkE,MAAO;UAACjE,KAAK,EAAC,gBAAgB;UAACE,QAAQ,EAAE,CAAC8D,OAAQ;UAAA/D,QAAA,EAAC;QAAC;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC,eAC5FzB,OAAA,CAACgB,aAAa;UAACC,OAAO,EAAEqE,YAAa;UAACpE,KAAK,EAAEqB,SAAS,GAAG,OAAO,GAAG,MAAO;UAACnB,QAAQ,EAAEe,MAAM,CAACxB,MAAM,KAAK,CAAE;UAAAQ,QAAA,EACvGoB,SAAS,GAAG,OAAO,GAAG;QAAM;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC,eAChBzB,OAAA,CAACgB,aAAa;UAACC,OAAO,EAAEoE,MAAO;UAACnE,KAAK,EAAC,YAAY;UAACE,QAAQ,EAAE,CAAC8D,OAAQ;UAAA/D,QAAA,EAAC;QAAC;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAe,CAAC,eACxFzB,OAAA;UAAKqB,SAAS,EAAC,4BAA4B;UAAAF,QAAA,EAAEqE;QAAgB;UAAAlE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAER,CAAC;AAACI,EAAA,CAzIIF,QAAQ;AAAAqE,GAAA,GAARrE,QAAQ;AA2Id,eAAeA,QAAQ;AAAC,IAAAvB,EAAA,EAAAsB,GAAA,EAAAsE,GAAA;AAAAC,YAAA,CAAA7F,EAAA;AAAA6F,YAAA,CAAAvE,GAAA;AAAAuE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}