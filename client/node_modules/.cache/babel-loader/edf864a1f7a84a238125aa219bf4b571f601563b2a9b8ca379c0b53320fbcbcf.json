{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prajj\\\\OneDrive\\\\Desktop\\\\rain\\\\client\\\\src\\\\MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapView = ({\n  routePath = [],\n  alerts = []\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const routeLayerRef = useRef(null);\n  const markersRef = useRef([]);\n  useEffect(() => {\n    if (!mapInstanceRef.current) {\n      mapInstanceRef.current = L.map(mapRef.current, {\n        center: [22.9734, 78.6569],\n        // India approx center\n        zoom: 5\n      });\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(mapInstanceRef.current);\n    }\n\n    // Clear previous layers\n    if (routeLayerRef.current) {\n      routeLayerRef.current.remove();\n      routeLayerRef.current = null;\n    }\n    markersRef.current.forEach(m => m.remove());\n    markersRef.current = [];\n\n    // Draw route\n    if (routePath.length > 1) {\n      const latlngs = routePath.map(p => [p.lat, p.lng]);\n      routeLayerRef.current = L.polyline(latlngs, {\n        color: '#4f46e5',\n        weight: 5,\n        opacity: 0.8\n      }).addTo(mapInstanceRef.current);\n      mapInstanceRef.current.fitBounds(routeLayerRef.current.getBounds(), {\n        padding: [20, 20]\n      });\n    }\n\n    // Draw markers\n    alerts.forEach(a => {\n      if (!a.coords) return;\n      const isRain = a.severity === 'high';\n      const marker = L.circleMarker([a.coords.lat, a.coords.lng], {\n        radius: 6,\n        color: isRain ? '#dc2626' : '#16a34a',\n        fillColor: isRain ? '#ef4444' : '#22c55e',\n        fillOpacity: 0.9,\n        weight: 2\n      }).addTo(mapInstanceRef.current);\n      const popupHtml = `\n        <div style=\"min-width:200px\">\n          <strong>${a.location}</strong><br/>\n          ${a.alert}<br/>\n          <div style=\"margin-top:6px;font-size:12px;\">\n            ${a.weatherData ? `Temp: ${a.weatherData.temperature}&deg;C | ${a.weatherData.description}` : 'Weather: N/A'}\n          </div>\n        </div>\n      `;\n      marker.bindPopup(popupHtml);\n      markersRef.current.push(marker);\n    });\n  }, [routePath, alerts]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '420px',\n      width: '100%',\n      borderRadius: 12,\n      overflow: 'hidden',\n      boxShadow: '0 10px 20px rgba(0,0,0,0.1)'\n    },\n    ref: mapRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(MapView, \"mbR4/SYLEy9FvUm53ZVXoDONBPw=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","MapView","routePath","alerts","_s","mapRef","mapInstanceRef","routeLayerRef","markersRef","current","map","center","zoom","tileLayer","maxZoom","attribution","addTo","remove","forEach","m","length","latlngs","p","lat","lng","polyline","color","weight","opacity","fitBounds","getBounds","padding","a","coords","isRain","severity","marker","circleMarker","radius","fillColor","fillOpacity","popupHtml","location","alert","weatherData","temperature","description","bindPopup","push","style","height","width","borderRadius","overflow","boxShadow","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/prajj/OneDrive/Desktop/rain/client/src/MapView.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nconst MapView = ({ routePath = [], alerts = [] }) => {\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const routeLayerRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n\r\n  useEffect(() => {\r\n    if (!mapInstanceRef.current) {\r\n      mapInstanceRef.current = L.map(mapRef.current, {\r\n        center: [22.9734, 78.6569], // India approx center\r\n        zoom: 5,\r\n      });\r\n\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        maxZoom: 19,\r\n        attribution: '&copy; OpenStreetMap contributors',\r\n      }).addTo(mapInstanceRef.current);\r\n    }\r\n\r\n    // Clear previous layers\r\n    if (routeLayerRef.current) {\r\n      routeLayerRef.current.remove();\r\n      routeLayerRef.current = null;\r\n    }\r\n    markersRef.current.forEach(m => m.remove());\r\n    markersRef.current = [];\r\n\r\n    // Draw route\r\n    if (routePath.length > 1) {\r\n      const latlngs = routePath.map(p => [p.lat, p.lng]);\r\n      routeLayerRef.current = L.polyline(latlngs, { color: '#4f46e5', weight: 5, opacity: 0.8 }).addTo(mapInstanceRef.current);\r\n      mapInstanceRef.current.fitBounds(routeLayerRef.current.getBounds(), { padding: [20, 20] });\r\n    }\r\n\r\n    // Draw markers\r\n    alerts.forEach(a => {\r\n      if (!a.coords) return;\r\n      const isRain = a.severity === 'high';\r\n      const marker = L.circleMarker([a.coords.lat, a.coords.lng], {\r\n        radius: 6,\r\n        color: isRain ? '#dc2626' : '#16a34a',\r\n        fillColor: isRain ? '#ef4444' : '#22c55e',\r\n        fillOpacity: 0.9,\r\n        weight: 2,\r\n      }).addTo(mapInstanceRef.current);\r\n\r\n      const popupHtml = `\r\n        <div style=\"min-width:200px\">\r\n          <strong>${a.location}</strong><br/>\r\n          ${a.alert}<br/>\r\n          <div style=\"margin-top:6px;font-size:12px;\">\r\n            ${a.weatherData ? `Temp: ${a.weatherData.temperature}&deg;C | ${a.weatherData.description}` : 'Weather: N/A'}\r\n          </div>\r\n        </div>\r\n      `;\r\n      marker.bindPopup(popupHtml);\r\n      markersRef.current.push(marker);\r\n    });\r\n  }, [routePath, alerts]);\r\n\r\n  return (\r\n    <div style={{ height: '420px', width: '100%', borderRadius: 12, overflow: 'hidden', boxShadow: '0 10px 20px rgba(0,0,0,0.1)' }} ref={mapRef} />\r\n  );\r\n};\r\n\r\nexport default MapView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}